var map;function createMap(a,b){var c=new OpenLayers.LonLat(b,a),d=createClickControl(),e=new OpenLayers.Layer.Markers("Markers");e.addMarker(createMarker(c));map=new OpenLayers.Map("map",{layers:[new OpenLayers.Layer.OSM,e],controls:[new OpenLayers.Control.Navigation({zoomWheelEnabled:!0}),new OpenLayers.Control.PanZoomBar,d],zoom:15,center:c.transform(new OpenLayers.Projection("EPSG:4326"),new OpenLayers.Projection("EPSG:900913"))});d.activate()}
function createMarker(a){var b=new OpenLayers.Size(21,25),c=new OpenLayers.Icon("/sites/all/modules/logger/js/openlayers/img/marker-green.png",b,null,function(){return new OpenLayers.Pixel(-(b.w/2),-b.h)});return new OpenLayers.Marker(a,c)}
function createClickControl(){OpenLayers.Control.Click=OpenLayers.Class(OpenLayers.Control,{initialize:function(a){this.handlerOptions=OpenLayers.Util.extend({},this.defaultHandlerOptions);OpenLayers.Control.prototype.initialize.apply(this,arguments);this.handler=new OpenLayers.Handler.Click(this,{click:this.trigger})},trigger:function(a){a=map.getLonLatFromViewPortPx(a.xy);var b=map.getLayersByName("Markers")[0];b.clearMarkers();b.addMarker(createMarker(a));a.transform(map.getProjectionObject(),
new OpenLayers.Projection("EPSG:4326"));updateFormFields(a)}});return new OpenLayers.Control.Click}function updateFormFields(a){var b=document.getElementById("edit-coordinates_longitude"),c=document.getElementById("edit-coordinates_latitude");b.value=a.lon.toFixed(8);c.value=a.lat.toFixed(8)};